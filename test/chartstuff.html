<meta charset="UTF-8">
<!doctype html>
<html lang="en">
<head>
<meta charset = "UTF-8" />
<meta name="viewport" content="width=device-width" />

<title>Mock-up</title>

<!--CSS-->
<!--
<link rel="stylesheet" type="text/css" href="css/ht_style.css"/>
<link rel="stylesheet" type="text/css" href="css/ht_transition.css"/> 
<link href='http://fonts.googleapis.com/css?family=Rochester' rel='stylesheet' type='text/css'>
-->

<!--JavaScript-->

<script src="scripts/jquery-1.11.1.min.js"></script>
<script src="scripts/Chart.js-master/Chart.js"></script>
<script src="scripts/highcharts/js/highcharts.js"></script>
</head>

<body>


<!--Creates the input fiels-->
<div class="valuesdiv" style="height: 50px;" id="months_inputs">
    <input type="button" value="Rand.months" onClick="randomize('months')" style="width: 100px;"/>
</div>
<div class="valuesdiv" style="height: 50px;" id="weeks_inputs">
    <input type="button" value="Rand.weeks" onClick="randomize('weeks')" style="width: 100px;"/>
</div>
<div class="valuesdiv" style="height: 50px;" id="days_inputs">
    <input type="button" value="Rand.days" onClick="randomize('weekdays')" style="width: 100px;"/>    
</div>

<script>   
var months_inputs = document.getElementById("months_inputs");
var weeks_inputs = document.getElementById("weeks_inputs"); 
var days_inputs = document.getElementById("days_inputs");

for(i = 0; i<12; i++){
    months_inputs.innerHTML += "<input type='text' name='"+i+"' style='width: 70px;' value='0' id='months_"+i+"' onchange='changeValue("+i+",\"months\",this.value)'/>";
}
for(i = 0; i<4; i++){
    weeks_inputs.innerHTML += "<input type='text' name='"+i+"' style='width: 70px;' value='0' id='weeks_"+i+"' onchange='changeValue("+i+",\"weeks\",this.value)'/>";
}
for(i = 0; i<7; i++){
    days_inputs.innerHTML += "<input type='text' name='"+i+"' style='width: 70px;' value='0' id='weekdays_"+i+"' onchange='changeValue("+i+",\"weekdays\",this.value)'/>";
}

</script>

<!---------------------------->
<hr></hr>

<div style="float: left; padding-right: 10px; border-right: 1px solid silver; height: 400;">
    <input type="button" value="Year" onClick="drawchart('months')" style="width: 100px;"/><br/>
    <input type="button" value="Month" onClick="drawchart('weeks')" style="width: 100px;"/><br/>    
    <input type="button" value="Week" onClick="drawchart('weekdays')" style="width: 100px;"/><br/>   
</div>

<!--HTML5 canvas used to display charts-->
<div style="width:30%; float: left;">
    <div id="canvasdiv"></div>
</div>

<!--Main JS-->
<script>

var weekdays = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
var weeks = ['Week 1', 'Week 2', 'Week 3', 'Week 4'];
var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
var labels = months;
var curchart = "year";
var lastchart = "year";

var points = [];

function changeValue(index, scope, newvalue){
    myLine.datasets[0].points[index].value = newvalue;
    myLine.update();
}

//Opens the .xml    
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.open("GET","test.xml",false);
    xmlhttp.send();
    xmlDoc=xmlhttp.responseXML;
    
//Saves xml nodes into variables
/*
    var time = xmlDoc.getElementsByTagName("Time")[0].childNodes[0].nodeValue;
    var from = xmlDoc.getElementsByTagName("from")[0].childNodes[0].nodeValue;;
    var heading = xmlDoc.getElementsByTagName("heading")[0].childNodes[0].nodeValue;;
    var body = xmlDoc.getElementsByTagName("body")[0].childNodes[0].nodeValue;;
*/
//Sets html span elements to show the loaded data.    
 /* document.getElementById("to").innerHTML = time;
    document.getElementById("from").innerHTML = from;
    document.getElementById("heading").innerHTML = heading;
    document.getElementById("message").innerHTML = body;
*/

//Puts the variables in an array. Ready to be sent forward.
/*
var reportData = {time:""+time, from:""+from, heading:""+heading, body:""+body};
*/
//Sends the data for intodb.php to process forward

function clicked() {
    $.ajax({
        url : "intodb.php",
        type: "POST",
        data: reportData,
        success: function(data)
        {
            //console.log( data );
            //data - response from server
        },
        error: function (errorThrown)
        {
        //console.log( data );
        console.log( "error" );
        },
    });
}


function randomize(value){
var rounds;
var randnumb; 

    if(value == "months"){
        rounds = 12;  
    }else if(value == "weeks"){
        rounds = 4;
    }else{
        rounds = 7;
    }
    
    points.length = 0;
    for(i = 0; i<rounds ;i++){
        randnumb = Math.round(Math.random()*25);
        document.getElementById(value+"_"+i).value = randnumb;
        points.push(randnumb);
    }
    
drawchart(value);

}


function getvalues(rounds, value){
var number;
points.length = 0;
    
    for(i = 0; i<rounds ;i++){
        number = document.getElementById(value+"_"+i).value;
        points.push(number);
    }    
}

function drawchart(scope){

    if(scope == "weekdays"){
        getvalues(7,"weekdays");
        labels = weekdays;
        curchart = "weekdays";
    }else if(scope == "months"){
        getvalues(12,"months");
        labels = months;
        curchart = "months";
    }else{
        getvalues(4,"weeks");
        labels = weeks;
        curchart = "weeks";
    }
      
    deletecanvas();  
    draw(1);
}


//CHARTS
var randomScalingFactor = function(){ return Math.round(Math.random()*50)};  
    
function draw(num){
    
    if(num == 1){
        makecanvas();
    }

    var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext("2d");
    
    var lineChartData = {
    labels : labels,
    datasets : [
            {
                label: "random chart 1",
                fillColor : "rgba(220,110,0,0.1)",
                strokeColor : "rgba(220,110,0,1)",
                pointColor : "rgba(220,110,0,1)",
                pointStrokeColor : "#fff",
                bezierCurveTension : 55.0,
                pointHighlightFill : "#fff",
                pointHighlightStroke : "rgba(0,0,0,1)",
                data : points,
            }            
        ]
    }


    window.myLine = new Chart(ctx).Line(lineChartData, {
            responsive: true
    });
}

function makecanvas(){
    document.getElementById('canvasdiv').innerHTML = "<canvas id=\"canvas\" height=\"728\" width=\"1024\"></canvas>";
}

function deletecanvas(){
    document.getElementById('canvasdiv').innerHTML = "";
}

window.onload = function(){
    makecanvas();
    drawchart("months");   
    //draw(0);
}

</script>
</body>
</html>
